---
title: MYSQL事务四大特性与隔离级别
date: 2018-01-26 14:01:11
tags: [MYSQL]
categories: [MYSQL]
---
### 什么是事务
在一个商城系统中，用户购买商品操作操作MYSQL，一般都需要减少库存以及减少用户金额等，
至少需要两条语句来进行操作，而一旦某个流程执行SQL时发生错误，就会导致剩下语句没有执行，
数据发生错误。这时候就可以使用事务来进行操作。
事务就是一组原子性的SQL查询，或者说一个独立的工作单元，
假如事务中某一条语句错误，那么所有语句都不会执行，这样事务内的语句就只有一个结果，
要么成功，要么失败。
<!-- more -->
### 事务的四大特性

事务具有四大特性：
1. 原子性：一个事务被视为一个最小的工作单元，整个事务只有两个结果，要么成功，要么失败。
2. 一致性：一致性是指事务必须使数据库从一个一致的状态变到另外一个一致的状态，也就是执行事务之前和之后的状态都必须处于一致的状态。
3. 隔离性：隔离性是指并发的事务是相互隔离的。即一个事务内部的操作及正在操作的数据必须封锁起来，在最终提交以前，对其他事务是不可见的。
4. 持久性：持久性是指一个事务一旦被提交了，那么对于数据库中的数据改变就是永久性的，即便是在数据库系统遭遇到故障的情况下也不会丢失提交事务的操作。

### 事务的四种隔离级别
在数据库操作中，为了有效保证并发读取数据的正确性，提出的事务隔离级别。我们的数据库锁，也是为了构建这些隔离级别存在的。

1. 未提交读(Read uncommitted)：允许脏读，就是一个事务可以读取另一个未提交事务的数据。
2. 已提交读(Read committed): 读提交，顾名思义，就是一个事务要等另一个事务提交后才能读取数据。
3. 可重复读(Repeatable read): 可重复读。在同一个事务内的查询都是事务开始时刻一致的，InnoDB默认级别。在SQL标准中，该隔离级别消除了不可重复读，但是还存在幻象读
4. 可串行化(Serializable): 在该级别下，事务串行化顺序执行，可以避免脏读、不可重复读与幻读。但是这种事务隔离级别效率低下
> 大多数数据库默认的事务隔离级别是Read committed，比如Sql Server , Oracle。MySQL的默认隔离级别是Repeatable read